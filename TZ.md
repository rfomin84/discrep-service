### Тех задание

Микросервис предназначен для сбора статистики из разных источников.  
Статистика бывает собранная нами (хранится в кликхаусе) и не наша (REST API)  

## Сбор нашей статистики
Сбор статистики подразумевает сходить в разные базы кликхауса (зависит от типа фида) и получить аггрегированные данные 
за определенный интервал времени  

Разделяется два таких сбора за текущий день и за вчерашний (финализированный)

1. Дневной  
Происходит каждые 10 минут и собирает статистику за интервал 00:00:00 по current_time. Статистика сохраняется во временное хранилище redis
При каждом сборе старая удаляется и записывается новая. (Так необходимо так как в кликхаусе статистика за текущий день может изменится) 

2. Финализированная 
Происходит раз в сутки на следующий день.  
Подразумевается что данные в кликхаусе уже устаканились и можно уже сохраняться навека. 
Поэтому интервал вчерашний день  
Данные сохраняются в кликхаус уже сервиса


## Внешний сбор
Собирать статистику по рест апи и записать в кликхаус  

## Balance History
Также есть mysql куда записываются списания с баланса по фиду при финализированном сбора и при сборе по внешней апи взависимости как работает фид по нашей стате или нет


## подсчет дискрепы
отношение между нашей статой и внешней (нереализовано от слово совсем)

## есть наброска схемы как это все работать должно
schema.png

## PS
вобщем по ходу зря я взялся делать свой проект )) уж слишком много работы в нем в итоге еще. Много всего нереализовано ((







